{"filter":false,"title":"activeadmin-async_panel.js.coffee","tooltip":"/app/assets/javascripts/activeadmin-async_panel.js.coffee","undoManager":{"mark":2,"position":2,"stack":[[{"start":{"row":0,"column":0},"end":{"row":39,"column":12},"action":"insert","lines":["# To use this stuff do next steps:","","# 1. Define async panel","# if you setup 'data-period' panel will be periodically updated if not it will be loaded once after page load","#   panel 'Name', class: 'async-panel', 'data-url' => path_helper, 'data-period' => 1.minute","","# 2. Define member_action or collection action to handle request specified by path_helper","#   collection_action do","#     @resources = SomeResource.some_scope","#     render layout: false # mandatory line, layout should be disaled to render template only","#   end","","# 3. Define you view template to render action above in file views/resource_names/action_name.html.arb (slim, erb)","#   table_for resources do","#     column :value1","#     column :calue2","#   end","","$ ->","  $('.async-panel').each (index, item) ->","    item = $(item)","    worker = ->","      item.addClass('processing')","      $('h3', item).hide().show(0)","","      $.ajax","        url: item.data('url')","        success: (data) ->","          $('.panel_contents', item).html(data)","        error: (data, status, error) ->","          $('.panel_contents', item).html(error)","        complete: ->","          item.removeClass('processing')","","          # Schedule the next request when the current one's completed","          period = item.data('period')","          if period","            setTimeout worker, period * 1000","","    worker()"],"id":1}],[{"start":{"row":20,"column":18},"end":{"row":21,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":21,"column":0},"end":{"row":21,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":18,"column":0},"end":{"row":40,"column":12},"action":"remove","lines":["$ ->","  $('.async-panel').each (index, item) ->","    item = $(item)","    ","    worker = ->","      item.addClass('processing')","      $('h3', item).hide().show(0)","","      $.ajax","        url: item.data('url')","        success: (data) ->","          $('.panel_contents', item).html(data)","        error: (data, status, error) ->","          $('.panel_contents', item).html(error)","        complete: ->","          item.removeClass('processing')","","          # Schedule the next request when the current one's completed","          period = item.data('period')","          if period","            setTimeout worker, period * 1000","","    worker()"],"id":20}]]},"ace":{"folds":[],"scrolltop":37.5234375,"scrollleft":0,"selection":{"start":{"row":18,"column":0},"end":{"row":18,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":1,"state":"start","mode":"ace/mode/coffee"}},"timestamp":1538114238028,"hash":"be681f9b148d8d75344009e8f556a57ed8d7fa40"}